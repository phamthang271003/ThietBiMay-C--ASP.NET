@model IEnumerable<Đồ_án_lập_trình_web.Models.ShoppingCartItem>


<section class="bg-light my-5">
    <div class="container">

        <div class="row">
            <!-- cart -->
            <div class="col-lg-9">
                <div class="card border shadow-0">
                    <div class="m-4">
                        <h4 class="card-title mb-4">Thông tin sản phẩm</h4>
                        <div class="row gy-3 mb-4">
                            <div class="col-lg-5">
                                Tên sản phẩm
                            </div>
                            <div class="col-lg-5 col-sm-6 col-6 ">
                                <div class="row">
                                    <div class="col-md-4">
                                        Số lượng
                                    </div>
                                    <div class="col-md-4">
                                        Đơn giá
                                    </div>
                                    <div class="col-md-4">
                                        Thành tiền
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-6">

                            </div>

                        </div>
                        @if (Model != null)
                        {
                            var tongTien = decimal.Zero;
                            foreach (var item in Model)
                            {
                                tongTien += item.TotalPrice;

                                <div class="row gy-3 mb-4" id="trow_@item.ProductID">
                                    <div class="col-lg-5">
                                        <div class="me-lg-5">
                                            <div class="d-flex">
                                                <img src="@item.ProductImg" id="Quantity_@item.ProductID" class="border rounded me-3" style="width: 96px; height: 96px;" />
                                                <div class="">
                                                    <a href="#" class="nav-link">@item.ProductName</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-5 col-sm-6 col-6 ">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <input style="width:50px" type="number" class="form-control" value="@item.Quantity" id="Quantity_@item.ProductID" />
                                            </div>
                                            <div class="col-md-4">
                                                <text class="h6">
                                                    <span id="">
                                                        @string.Format("{0:0,#}", item.Price) đ
                                                    </span>
                                                </text>
                                                <br />
                                            </div>
                                            <div class="col-md-4">
                                                @string.Format("{0:0,#}", item.TotalPrice) đ

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-sm-6 d-flex justify-content-sm-center justify-content-md-start justify-content-lg-center justify-content-xl-end mb-2">
                                        <div class="float-md-end">
                                            <a href="#!" class="btn btn-light border px-2 icon-hover-primary"><i class="fas fa-heart fa-lg px-1 text-secondary"></i></a>

                                            <!-- Thêm thuộc tính data-productid để lưu trữ ProductID -->
                                            <a href="#" data-id="@item.ProductID" class=" btn btn-light btnDelete border text-danger icon-hover-danger ">Xóa</a>
                                        </div>
                                    </div>
                                </div>

                            }
                            <div class="row gy-3 mb-4">
                                <div class="col-lg-5">

                                </div>
                                <div class="col-lg-5 col-sm-6 col-6 ">
                                    <div class="row">
                                        <div class="col-md-4">

                                        </div>
                                        <div class="col-md-4 fs-6 fw-bold">
                                            Tổng tiền
                                        </div>
                                        <div class="col-md-4">
                                            <div class=""> @string.Format("{0:0,#}", tongTien)đ</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-2 col-sm-6">
                                    <div><a href="#" class="btn btn-sm btn-danger btnDeleteAll float-md-end">Xóa tất cả</a></div>
                                </div>

                            </div>

                        }
                        else
                        {
                            <p>Không có sản phẩm trong giỏ hàng</p>
                        }
                    </div>


                    <div class="border-top pt-4 mx-4 mb-4">
                        <p><i class="fas fa-truck text-muted fa-lg"></i> Giao hàng miễn phí trong vòng 1-2 tuần</p>
                        <p class="text-muted">
                            Thiết bị máy là một cửa hàng chuyên cung cấp dụng cụ cơ khí chất lượng cao và độ bền vượt trội. Với cam kết mang đến sự hài lòng tuyệt đối cho khách hàng, chúng tôi tự hào là địa chỉ tin cậy mà bạn có thể dựa vào khi cần sử dụng các sản phẩm cơ khí.
                        </p>
                    </div>
                </div>
            </div>
            <!-- cart -->
            <!-- summary -->
            @if (ViewBag.CheckCart != null)
            {
                <div class="col-lg-3">
                    <div class="card mb-3 border shadow-0">
                        <div class="card-body">
                            <form>
                                <div class="form-group">
                                    <label class="form-label">Have coupon?</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control border" name="" placeholder="Coupon code" />
                                        <button class="btn btn-light border">Apply</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    @if (Model != null)
                    {
                        var tongTien = decimal.Zero;
                 
                            <div class="card shadow-0 border">
                                <div class="card-body">
                                    @foreach (var item in Model)
                                    {

                                        tongTien += item.TotalPrice;
                                        <div class="d-flex justify-content-between">
                                            <p class="mb-2">@item.ProductName:</p>
                                            <p class="mb-2">@string.Format("{0:0,#}", item.TotalPrice)đ</p>
                                        </div>
                                        <hr />
                                    }
                                    <div class="d-flex justify-content-between">
                                        <p class="mb-2">Tổng tiền:</p>
                                        <p class="mb-2"> @string.Format("{0:0,#}", tongTien)đ</p>
                                    </div>
                                    <div class="mt-3">
                                        <a href="~/ShoppingCart/CheckOut" class="btn btn-success w-100 shadow-0 mb-2">Thanh toán </a>
                                        <a href="@Url.Action("Index","Home")" class="btn btn-light w-100 border mt-2"> Trở lại cửa hàng </a>
                                    </div>
                                </div>
                            </div>
                  
                    }
                    else
                    {

                    }
                </div>

            }
            <!-- summary -->
        </div>
    </div>
</section>